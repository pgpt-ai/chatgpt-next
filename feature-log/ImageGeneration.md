## 实现 PGPT 图片生成的功能接入

根据需求来说是在前端进行该功能的 API 端点与 key 设置的，并且通过关键词指令来匹配，因此在思考过后不通过 NextJS 的 router 来做，而是直接在远前端的 API 请求新建一个接口。

大概花了 40 分钟左右的时间对消息的发送与回显先进行了一个大致的研究，然后在 `app\context\ChatContext.tsx` 文件中找到了发送消息的函数，在这里进行了关键词 `给我画一张图` 进行了拦截。

当匹配到此关键词并且已经设置了相关参数 `APIKEY/BaseUrl` 的情况下则调用在 `utils\api.ts` 中新增的 `fetchApiChatImages` 函数进行请求发起，然后在请求成功返回之后直接遍历 `data` 中的 `url` 将其拼合成 markdown 语法然后直接通过原方法 set 到 Messages 中进行显示。
实现此代码过程约花费了一个小时左右进行编写和测试。

## 注意事项

在设置的时候 BaseURL 末尾不能携带斜杠 `/`
